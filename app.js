(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{19:function(e,t,o){var n=o(45),r=o(35),c=o(7),i=o(90),a=o(9),s=o(65).copyContent;a.contextIsWidget||("null"===location.origin?r.websiteUrl.textContent=location.pathname:r.websiteUrl.textContent=location.origin+location.pathname,r.query.textContent=location.search,r.header.onclick=function(){return s(r.header)},o(91),n.sep7Utils.isWebHandlerSupported()&&(c.show(r.registerSep7Handler),r.registerSep7Handler.onclick=function(){n.sep7Utils.registerWebHandler(location.href.split(/[?#]/,1)[0],"Cosmic.link")}));var u=o(92),l=i.add("Sign",r.sign);l.onSelect=function(){history.replaceState("",null,location.pathname+location.search),u.refresh()},u.init(),a.contextIsWidget||i.add("Help",r.help),i.current===l?l.onSelect():i.current||i.select("#sign")},65:function(e,t,o){var n=t,r=o(35),c=o(7);n.enableButton=function(e,t,o){"string"==typeof t&&(e.value=t),e.onclick=o,e.disabled=!1},n.disableButton=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!0},n.readWriteBox=function(e,t,o){"string"==typeof o&&(e.value=o),"string"==typeof t&&(e.placeholder=t),e.disabled=!1,e.readOnly=!1,e.onclick=void 0,e.style.cursor="initial"},n.readOnlyBox=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!1,e.readOnly=!0,e.onclick=function(){return n.copyContent(e)},e.style.cursor="pointer"},n.disableBox=function(e,t){n.readWriteBox(e,t,""),e.disabled=!0},n.display=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t?"."+t:null,r=n?c.create("span",n,o):o;c.rewrite(e,c.create("span",n,r))},n.showIf=function(e,t){e?c.show(t):c.hide(t)},n.switchPage=function(e,t){c.append(r.body,e),c.append(r.main,t)},n.copyContent=function(e){if(c.copyContent(e)&&document.activeElement.value){var t=c.grab("#copied");t&&c.destroy(t);var o=c.create("span","#copied","Copied");e.parentNode.insertBefore(o,e),setTimeout((function(){o.hidden=!0}),3e3)}}},91:function(e,t,o){o(35).tamper.src="https://robohash.org/"+function(){if(localStorage.myHash)return localStorage.myHash;for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",o=0;o<32;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return localStorage.myHash=t,t}()},92:function(e,t,o){var n=o(0),r=o(1),c=t,i=o(45),a=i.CosmicLink,s=o(35),u=o(6),l=o(7),d=o(93),h=o(5).timeout,f=o(11),k=o(9),p=o(65),w=p.enableButton,g=p.disableButton,m=p.readWriteBox,b=p.readOnlyBox,v=p.disableBox,x=p.display,y=p.showIf;c.init=function(){for(var e in k.query||l.rewrite(s.cosmiclink_description,"No transaction"),f.nodes.forEach((function(e){return l.append(s.authenticators,e)})),s.authenticators.value=k.authenticator.name,k.redirect&&(s.redirectionCheckbox.checked=!0),k.qrCode&&N.enable(),localStorage)if("network:"===e.substr(0,8)){var t=e.substr(8),o=i.resolve.networkPassphrase(t);i.config.setupNetwork(t,localStorage[e],o)}},c.refresh=r(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.query?k.cosmicLink=new a(k.query):k.cosmicLink={tdesc:{}},B.init(),q.init(),k.cosmicLink.query&&S.refresh();case 4:case"end":return e.stop()}}),e)})));var S={refresh:function(){if(!k.authenticator.needSource||k.accountId)if(!k.authenticator.needNetwork||!s.customNetwork.checked||k.horizon&&k.network){i.config.source=k.accountId,i.config.network=k.network;var e=k.transaction=k.authenticator.handle(k.cosmicLink);k.transaction.then((function(t){k.transaction===e&&q.refresh(t)})).catch((function(){k.transaction===e&&q.error(k.cosmicLink.status)}))}else q.error("Please fill custom network fields");else k.authenticator.getAccountId||q.error("Please set a source account")}},B={init:function(){x(s.accountMsgbox,""),k.authenticator=f[s.authenticators.value],localStorage.authenticator=k.authenticator.name,k.authenticator.needSource?C.init():C.disable(),k.authenticator.needNetwork?I.init():I.disable(),k.authenticator.refresh&&k.authenticator.refresh(c.refresh)}},C={disable:function(){l.hide(s.accountDiv),k.accountId=void 0}};C.init=r(n.mark((function e(){var t,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.show(s.accountDiv),k.authenticator.getAccountId){e.next=5;break}k.cosmicLink.tdesc.source?k.cosmicLink.tdesc.source.error?v(s.accountIdBox,k.cosmicLink.tdesc.source.error.message):(k.accountId=!0,b(s.accountIdBox,k.cosmicLink.tdesc.source)):(k.accountId=localStorage.accountId,m(s.accountIdBox,"Your Account Address or ID",k.accountId)),e.next=26;break;case 5:return k.accountId=void 0,v(s.accountIdBox,"Connecting..."),t=k.authenticator,e.prev=8,e.next=11,k.authenticator.getAccountId();case 11:if(o=e.sent,k.authenticator===t){e.next=14;break}return e.abrupt("return");case 14:k.accountId=o,b(s.accountIdBox,o),S.refresh(),e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(8),k.authenticator===t){e.next=23;break}return e.abrupt("return");case 23:s.accountIdBox.placeholder="Error",x(s.accountMsgbox,"error",e.t0.message+"."),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[8,19]])})));var I={disable:function(){l.hide(s.networkDiv),k.network="public",k.horizon=void 0},init:function(){switch(l.show(s.networkDiv),l.hide(s.customNetworkSetup),k.network=k.cosmicLink.tdesc.network||localStorage.networkSelector,k.horizon=void 0,k.network){case void 0:case"public":s.publicNetwork.checked=!0,s.networkSelector.scrollLeft=0;break;case"test":s.testNetwork.checked=!0;break;default:s.networkSelector.onscroll&&s.networkSelector.onscroll(),h(1).then((function(){return s.networkSelector.scrollLeft=999})),s.customNetwork.checked=!0,l.show(s.customNetworkSetup),k.network||(k.network=localStorage.customPassphrase),k.horizon=i.resolve.horizon(k.network||"")||k.cosmicLink.tdesc.horizon,s.customPassphrase.value=k.network||"",s.customHorizon.value=k.horizon||""}k.cosmicLink.tdesc.network&&I.lock()},lock:function(){b(s.customPassphrase),s.publicNetwork.disabled=!0,s.testNetwork.disabled=!0,s.customNetwork.disabled=!0},switch:function(e){localStorage.networkSelector=e,c.refresh()}};s.authenticators.onchange=function(){k.authenticator&&k.authenticator.onExit&&k.authenticator.onExit(),k.redirect=localStorage.redirect=!1,s.redirectionCheckbox.checked=!1,c.refresh()},s.accountIdBox.onchange=function(){k.accountId=localStorage.accountId=s.accountIdBox.value,c.refresh()},s.networkSelector.onscroll=function(){s.networkSelector.style.textOverflow="initial",s.networkSelector.onscroll=void 0},s.publicNetwork.onchange=function(){return I.switch("public")},s.testNetwork.onchange=function(){return I.switch("test")},s.customNetwork.onchange=function(){return I.switch("")},s.customPassphrase.onchange=function(){var e=i.resolve.networkName(s.customPassphrase.value);localStorage.customPassphrase=e,I.switch("")},s.customHorizon.onchange=function(){if(k.horizon=s.customHorizon.value,k.horizon&&"http"!==k.horizon.substr(0,4)&&(k.horizon="https://"+k.horizon),k.network&&k.horizon){var e=i.resolve.networkPassphrase(k.network);i.config.setupNetwork(k.network,k.horizon,e),localStorage["network:"+e]=k.horizon}k.network&&c.refresh()};var q={init:function(){if(q.display(""),y(k.authenticator.redirection,s.redirectionForm),y(k.authenticator.textarea,s.textareaForm),y(k.query&&k.authenticator.qrCode,s.qrForm),k.query)k.authenticator.redirection&&g(s.redirectionButton,"â€¦"),k.authenticator.textarea&&v(s.xdrBox,"Computing..."),k.authenticator.qrCode&&N.loadingAnim();else if(k.authenticator.url){w(s.redirectionButton,k.authenticator.buttonText,(function(){return location.href=k.authenticator.url}))}else q.error("No transaction")},refresh:function(e){if(k.authenticator.redirection){w(s.redirectionButton,k.authenticator.buttonText,(function(){return q.click(e)}))}k.redirect&&!k.contextIsWidget&&s.redirectionButton.onclick(),k.authenticator.textarea&&b(s.xdrBox,e),k.authenticator.qrCode&&N.refresh(e)},error:function(e){g(s.redirectionButton,e),v(s.xdrBox,e),l.clear(s.qrCode)}};q.click=function(){var e=r(n.mark((function e(t){var o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}k.contextIsWidget||u.isEmbedded&&"new"===k.authenticator.target?(open(t,"_blank"),window.parent.postMessage("close","*")):u.isEmbedded&&"external"===k.authenticator.target?(open(t),window.parent.postMessage("close","*")):location.replace(t),e.next=20;break;case 4:if("function"!=typeof t){e.next=20;break}return x(s.redirectionMsgbox,"info","Waiting for confirmation..."),s.redirectionButton.disabled=!0,e.prev=7,e.next=10,t();case 10:return o=e.sent,e.next=13,q.sendTransaction(o);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0.response||e.t0),q.display("error",e.t0.message.replace(/\.$/,"")),s.redirectionButton.disabled=!1;case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),q.sendTransaction=r(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.display("info","Sending to the network..."),history.replaceState({},"",k.cosmicLink.query),s.query.textContent=k.cosmicLink.query,I.lock(),e.next=6,k.cosmicLink.send();case 6:q.display("info","Transaction validated"),u.isEmbedded&&parent.postMessage("close","*"),document.referrer?w(s.redirectionButton,"Close",(function(){return history.back()})):s.redirectionButton.value="Done";case 9:case"end":return e.stop()}}),e)}))),q.display=function(e,t){x(s.redirectionMsgbox,e,t)};var N={loadingAnim:function(){l.rewrite(s.qrCode,l.create("canvas",".cosmiclib_loadingAnim"))},refresh:function(e){if(k.authenticator.qrCode&&e){var t=l.create("canvas");d.toCanvas(t,e,{margin:0,scale:4}),t.title=e,l.rewrite(s.qrCode,t)}},switch:function(){k.qrCode=localStorage.QR=!k.qrCode,k.qrCode?N.enable():N.disable()},enable:function(){s.qrButton.className="enabled",l.show(s.qrCode)},disable:function(){s.qrButton.className=void 0,l.hide(s.qrCode)}};s.redirectionButton.onclick=q.click,s.qrButton.onclick=N.switch,s.redirectionCheckbox.onchange=function(){k.redirect=localStorage.redirect=!k.redirect}}}]);
//# sourceMappingURL=app.js.map